let currentTab;const elementsWithI18n=document.querySelectorAll("[data-i18n]");for(const e of elementsWithI18n){const t=e.dataset.i18n,n=chrome.i18n.getMessage(t);e.innerText=n}"yes"==localStorage.getItem("autosubmit")&&(document.getElementById("autosubmit").checked=!0),document.getElementById("autosubmit").addEventListener("click",()=>{document.getElementById("autosubmit").checked?localStorage.setItem("autosubmit","yes"):localStorage.setItem("autosubmit","no")}),chrome.storage.local.get(["badge"],e=>{!0===e.badge&&(document.getElementById("badge").checked=!0)}),document.getElementById("badge").addEventListener("click",()=>{chrome.storage.local.set({badge:document.getElementById("badge").checked})}),chrome.tabs.query({currentWindow:!0,active:!0},e=>{const t=getUrlDomain(e[0].url);currentTab=e[0],getLogins(t)});const infos=["Did you like the extension? Please recommend it to your friends!",'<a href="#" data-to="https://rebrand.ly/hucfc30">Contact Devloper</a>'];document.getElementById("info").innerHTML=infos[Math.floor(Math.random()*infos.length)];const linkInInfo=document.getElementById("info").querySelector("a");linkInInfo&&linkInInfo.addEventListener("click",e=>{const t=e.target.dataset.to;window.open(t,"_blank").focus()});const getLogins=e=>{document.getElementById("logins").innerText="                    Go to The Login Webpage\n\n\n Searching.....",fetch("http://bugmenot.com/view/"+e).then(e=>e.text()).then(e=>{let t=document.createElement("div");t.innerHTML=e,0==(t=t.querySelector("#content")).getElementsByClassName("account").length?document.getElementById("logins").innerText="It looks like there are no logins availible for this page.":document.getElementById("logins").innerHTML="";const n=t.getElementsByClassName("account");for(const e of n){const t=e.querySelectorAll("kbd"),n=t[0].innerText,o=t[1].innerText,c=e.querySelector(".success_rate").innerText,s=/\d{1,3}/.exec(c)[0],l=window.getColor(s);let i=document.createElement("li");i.classList.add("list-group-item","login"),i.innerHTML=`\n                <div class="row">\n                    <div class="col-1 pr-0 success-container">\n                        <div class="success-circle" style="background-color: ${l};"></div>\n                    </div>\n                    <div class="col-10 login-container">\n                        <kbd>${n}</kbd><br />\n                        <kbd>${o}</kbd>\n                    </div>\n                </div>\n            `,i.addEventListener("click",()=>{const e=setTimeout(()=>{document.getElementById("could-not-connect").style.display="block"},100);chrome.tabs.sendMessage(currentTab.id,{command:"fill",user:n,password:o,autosubmit:"yes"==localStorage.getItem("autosubmit")},t=>{const n=chrome.runtime.lastError;n&&"Could not establish connection. Receiving end does not exist."===n.message||clearTimeout(e)}),"yes"==localStorage.getItem("autosubmit")&&window.close()}),document.getElementById("logins").append(i)}}).catch(console.error)};