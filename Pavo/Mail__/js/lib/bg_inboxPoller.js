let EXT_bg_inboxPoller=new function(){let e,t,o,i;e=void 0,t=5,o=0,i=0;this.init=(()=>{});let n=async()=>{void 0===e&&(e=await EXT_helper.getLocalStorage("inboxPolling")),e&&await EXT_helper.getLocalStorage("ukey")&&EXT_helper.callApi("checkNew",{},!0).then(e=>{e.amount>0&&(this.setNewMails(e.amount),EXT_helper.showNotification(chrome.i18n.getMessage("newMail").replace("%1",e.amount)))})},a=async()=>{o>0&&(i=(i+30)%510,chrome.browserAction.setBadgeBackgroundColor({color:[i<255?i:510-i,0,0,255]}))};this.start=(e=>{t=e,n(),window.setInterval(n,1e3*t),window.setInterval(a,50)}),this.setActive=(t=>{EXT_helper.setLocalStorage("inboxPolling",t).then(()=>e=t)}),this.setNewMails=(e=>{(o=e)>0?chrome.browserAction.setBadgeText({text:String(e)}):chrome.browserAction.setBadgeText({text:""})})};EXT_bg_inboxPoller.init();