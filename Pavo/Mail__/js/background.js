let EXT_background=new function(){let e;e=void 0;this.init=(()=>{EXT_bg_messageHandler.addActions({updateContextMenu:t,setInboxPolling:o,resetNewMails:n}),EXT_bg_inboxPoller.start(15)});let t=({showEmailPasteOption:t})=>{void 0!==e&&(chrome.contextMenus.remove(e),e=void 0),t&&(e=chrome.contextMenus.create({enabled:!0,title:chrome.i18n.getMessage("pasteMessage"),contexts:["all"],onclick:e=>{i()}}))},o=({state:e})=>{EXT_bg_inboxPoller.setActive(e)},n=()=>{EXT_bg_inboxPoller.setNewMails(0)},i=()=>{EXT_helper.callApi("getAddress",{}).then(({ukey:e,email:t})=>{if(!e)return!1;EXT_helper.setLocalStorage("ukey",e).then(()=>{EXT_bg_inboxPoller.setActive(!0),chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{action:"pasteEmailToInput",email:t})})})})}};EXT_background.init();